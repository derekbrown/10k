{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MediaObject = void 0;\n\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\n\nconst react_1 = require(\"react\");\n\nconst nft_hooks_1 = require(\"@zoralabs/nft-hooks\");\n\nconst useMediaContext_1 = require(\"../context/useMediaContext\");\n\nconst MediaObject = _ref => {\n  let {\n    contentURI,\n    metadata,\n    a11yIdPrefix,\n    isFullPage = false\n  } = _ref;\n\n  var _a, _b;\n\n  const mediaType = nft_hooks_1.useNFTContent(metadata.animation_url);\n  const [renderingInfo, setRenderingInfo] = react_1.useState();\n  const {\n    getStyles,\n    getString,\n    renderers,\n    style\n  } = useMediaContext_1.useMediaContext();\n  const request = {\n    media: {\n      // from zora content uri\n      content: contentURI ? {\n        uri: contentURI,\n        // TODO(iain): Clean up for catalog.works\n        type: metadata.mimeType || ((_a = metadata.body) === null || _a === void 0 ? void 0 : _a.mimeType)\n      } : undefined,\n      image: metadata.image ? {\n        uri: metadata.image,\n        type: \"image/\"\n      } : undefined,\n      // from metadata.animation_url\n      animation: metadata.animation_url ? {\n        uri: metadata.animation_url,\n        type: (_b = mediaType.content) === null || _b === void 0 ? void 0 : _b.mimeType\n      } : undefined\n    },\n    metadata,\n    renderingContext: isFullPage ? \"FULL\" : \"PREVIEW\"\n  };\n  react_1.useEffect(() => {\n    const sortedRenderers = renderers.sort((a, b) => a.getRenderingPreference(request) > b.getRenderingPreference(request) ? -1 : 1);\n    setRenderingInfo(sortedRenderers[0]);\n  }, [renderers, metadata, contentURI, mediaType.content]);\n\n  if (renderingInfo) {\n    const RenderingComponent = renderingInfo.render;\n    return jsx_runtime_1.jsx(RenderingComponent, {\n      a11yIdPrefix: a11yIdPrefix,\n      getStyles: getStyles,\n      getString: getString,\n      theme: style.theme,\n      request: request\n    }, void 0);\n  }\n\n  return jsx_runtime_1.jsx(react_1.Fragment, {}, void 0);\n};\n\nexports.MediaObject = MediaObject;","map":{"version":3,"sources":["/Users/derekbrown/workspace/10kdigits/node_modules/@zoralabs/nft-components/dist/components/MediaObject.js"],"names":["Object","defineProperty","exports","value","MediaObject","jsx_runtime_1","require","react_1","nft_hooks_1","useMediaContext_1","contentURI","metadata","a11yIdPrefix","isFullPage","_a","_b","mediaType","useNFTContent","animation_url","renderingInfo","setRenderingInfo","useState","getStyles","getString","renderers","style","useMediaContext","request","media","content","uri","type","mimeType","body","undefined","image","animation","renderingContext","useEffect","sortedRenderers","sort","a","b","getRenderingPreference","RenderingComponent","render","jsx","theme","Fragment"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MediaObject = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst nft_hooks_1 = require(\"@zoralabs/nft-hooks\");\nconst useMediaContext_1 = require(\"../context/useMediaContext\");\nconst MediaObject = ({ contentURI, metadata, a11yIdPrefix, isFullPage = false, }) => {\n    var _a, _b;\n    const mediaType = nft_hooks_1.useNFTContent(metadata.animation_url);\n    const [renderingInfo, setRenderingInfo] = react_1.useState();\n    const { getStyles, getString, renderers, style } = useMediaContext_1.useMediaContext();\n    const request = {\n        media: {\n            // from zora content uri\n            content: contentURI\n                ? {\n                    uri: contentURI,\n                    // TODO(iain): Clean up for catalog.works\n                    type: metadata.mimeType || ((_a = metadata.body) === null || _a === void 0 ? void 0 : _a.mimeType),\n                }\n                : undefined,\n            image: metadata.image\n                ? {\n                    uri: metadata.image,\n                    type: \"image/\",\n                }\n                : undefined,\n            // from metadata.animation_url\n            animation: metadata.animation_url\n                ? {\n                    uri: metadata.animation_url,\n                    type: (_b = mediaType.content) === null || _b === void 0 ? void 0 : _b.mimeType,\n                }\n                : undefined,\n        },\n        metadata,\n        renderingContext: isFullPage ? \"FULL\" : \"PREVIEW\",\n    };\n    react_1.useEffect(() => {\n        const sortedRenderers = renderers.sort((a, b) => a.getRenderingPreference(request) > b.getRenderingPreference(request)\n            ? -1\n            : 1);\n        setRenderingInfo(sortedRenderers[0]);\n    }, [renderers, metadata, contentURI, mediaType.content]);\n    if (renderingInfo) {\n        const RenderingComponent = renderingInfo.render;\n        return (jsx_runtime_1.jsx(RenderingComponent, { a11yIdPrefix: a11yIdPrefix, getStyles: getStyles, getString: getString, theme: style.theme, request: request }, void 0));\n    }\n    return jsx_runtime_1.jsx(react_1.Fragment, {}, void 0);\n};\nexports.MediaObject = MediaObject;\n"]},"metadata":{},"sourceType":"script"}