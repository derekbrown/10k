{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAuctionState = exports.AuctionStateInfo = void 0;\n\nconst AuctionInfoTypes_1 = require(\"./AuctionInfoTypes\");\n\nvar AuctionStateInfo;\n\n(function (AuctionStateInfo) {\n  AuctionStateInfo[\"LOADING\"] = \"LOADING\";\n  AuctionStateInfo[\"NO_PRICING\"] = \"NO_PRICING\";\n  AuctionStateInfo[\"PERPETUAL_BID\"] = \"PERPETUAL_BID\";\n  AuctionStateInfo[\"PERPETUAL_ASK\"] = \"PERPETUAL_ASK\";\n  AuctionStateInfo[\"RESERVE_AUCTION_PENDING\"] = \"RESERVE_AUCTION_PENDING\";\n  AuctionStateInfo[\"RESERVE_AUCTION_ACTIVE\"] = \"RESERVE_AUCTION_ACTIVE\";\n  AuctionStateInfo[\"RESERVE_AUCTION_LAST_15\"] = \"RESERVE_AUCTION_LAST_15\";\n  AuctionStateInfo[\"RESERVE_AUCTION_ENDED\"] = \"RESERVE_AUCTION_ENDED\";\n  AuctionStateInfo[\"RESERVE_AUCTION_FINISHED\"] = \"RESERVE_AUCTION_FINISHED\";\n})(AuctionStateInfo = exports.AuctionStateInfo || (exports.AuctionStateInfo = {}));\n\nfunction getAuctionState(pricing) {\n  var _a;\n\n  if (pricing.auctionType === AuctionInfoTypes_1.AuctionType.PERPETUAL) {\n    if (pricing.perpetual.ask) {\n      return AuctionStateInfo.PERPETUAL_ASK;\n    }\n\n    if (!pricing.perpetual.highestBid && ((_a = pricing.reserve) === null || _a === void 0 ? void 0 : _a.previousBids.length)) {\n      return AuctionStateInfo.RESERVE_AUCTION_FINISHED;\n    }\n\n    if (pricing.perpetual.highestBid) {\n      return AuctionStateInfo.PERPETUAL_BID;\n    }\n\n    return AuctionStateInfo.NO_PRICING;\n  }\n\n  if (pricing.auctionType === AuctionInfoTypes_1.AuctionType.RESERVE && pricing.reserve) {\n    if (pricing.reserve.current.likelyHasEnded) {\n      return AuctionStateInfo.RESERVE_AUCTION_FINISHED;\n    }\n\n    if (pricing.reserve.current.reserveMet) {\n      if (pricing.reserve.expectedEndTimestamp && Math.floor(new Date().getTime() / 1000) - 15 * 60 > parseInt(pricing.reserve.expectedEndTimestamp, 10)) {\n        return AuctionStateInfo.RESERVE_AUCTION_LAST_15;\n      }\n\n      return AuctionStateInfo.RESERVE_AUCTION_ACTIVE;\n    }\n\n    return AuctionStateInfo.RESERVE_AUCTION_PENDING;\n  }\n\n  return AuctionStateInfo.NO_PRICING;\n}\n\nexports.getAuctionState = getAuctionState;","map":{"version":3,"sources":["/Users/derekbrown/workspace/10kdigits/node_modules/@zoralabs/nft-hooks/dist/fetcher/AuctionState.js"],"names":["Object","defineProperty","exports","value","getAuctionState","AuctionStateInfo","AuctionInfoTypes_1","require","pricing","_a","auctionType","AuctionType","PERPETUAL","perpetual","ask","PERPETUAL_ASK","highestBid","reserve","previousBids","length","RESERVE_AUCTION_FINISHED","PERPETUAL_BID","NO_PRICING","RESERVE","current","likelyHasEnded","reserveMet","expectedEndTimestamp","Math","floor","Date","getTime","parseInt","RESERVE_AUCTION_LAST_15","RESERVE_AUCTION_ACTIVE","RESERVE_AUCTION_PENDING"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,eAAR,GAA0BF,OAAO,CAACG,gBAAR,GAA2B,KAAK,CAA1D;;AACA,MAAMC,kBAAkB,GAAGC,OAAO,CAAC,oBAAD,CAAlC;;AACA,IAAIF,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,EAAAA,gBAAgB,CAAC,SAAD,CAAhB,GAA8B,SAA9B;AACAA,EAAAA,gBAAgB,CAAC,YAAD,CAAhB,GAAiC,YAAjC;AACAA,EAAAA,gBAAgB,CAAC,eAAD,CAAhB,GAAoC,eAApC;AACAA,EAAAA,gBAAgB,CAAC,eAAD,CAAhB,GAAoC,eAApC;AACAA,EAAAA,gBAAgB,CAAC,yBAAD,CAAhB,GAA8C,yBAA9C;AACAA,EAAAA,gBAAgB,CAAC,wBAAD,CAAhB,GAA6C,wBAA7C;AACAA,EAAAA,gBAAgB,CAAC,yBAAD,CAAhB,GAA8C,yBAA9C;AACAA,EAAAA,gBAAgB,CAAC,uBAAD,CAAhB,GAA4C,uBAA5C;AACAA,EAAAA,gBAAgB,CAAC,0BAAD,CAAhB,GAA+C,0BAA/C;AACH,CAVD,EAUGA,gBAAgB,GAAGH,OAAO,CAACG,gBAAR,KAA6BH,OAAO,CAACG,gBAAR,GAA2B,EAAxD,CAVtB;;AAWA,SAASD,eAAT,CAAyBI,OAAzB,EAAkC;AAC9B,MAAIC,EAAJ;;AACA,MAAID,OAAO,CAACE,WAAR,KAAwBJ,kBAAkB,CAACK,WAAnB,CAA+BC,SAA3D,EAAsE;AAClE,QAAIJ,OAAO,CAACK,SAAR,CAAkBC,GAAtB,EAA2B;AACvB,aAAOT,gBAAgB,CAACU,aAAxB;AACH;;AACD,QAAI,CAACP,OAAO,CAACK,SAAR,CAAkBG,UAAnB,KAAkC,CAACP,EAAE,GAAGD,OAAO,CAACS,OAAd,MAA2B,IAA3B,IAAmCR,EAAE,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,EAAE,CAACS,YAAH,CAAgBC,MAA9G,CAAJ,EAA2H;AACvH,aAAOd,gBAAgB,CAACe,wBAAxB;AACH;;AACD,QAAIZ,OAAO,CAACK,SAAR,CAAkBG,UAAtB,EAAkC;AAC9B,aAAOX,gBAAgB,CAACgB,aAAxB;AACH;;AACD,WAAOhB,gBAAgB,CAACiB,UAAxB;AACH;;AACD,MAAId,OAAO,CAACE,WAAR,KAAwBJ,kBAAkB,CAACK,WAAnB,CAA+BY,OAAvD,IAAkEf,OAAO,CAACS,OAA9E,EAAuF;AACnF,QAAIT,OAAO,CAACS,OAAR,CAAgBO,OAAhB,CAAwBC,cAA5B,EAA4C;AACxC,aAAOpB,gBAAgB,CAACe,wBAAxB;AACH;;AACD,QAAIZ,OAAO,CAACS,OAAR,CAAgBO,OAAhB,CAAwBE,UAA5B,EAAwC;AACpC,UAAIlB,OAAO,CAACS,OAAR,CAAgBU,oBAAhB,IACAC,IAAI,CAACC,KAAL,CAAW,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,IAAlC,IAA0C,KAAK,EAA/C,GACIC,QAAQ,CAACxB,OAAO,CAACS,OAAR,CAAgBU,oBAAjB,EAAuC,EAAvC,CAFhB,EAE4D;AACxD,eAAOtB,gBAAgB,CAAC4B,uBAAxB;AACH;;AACD,aAAO5B,gBAAgB,CAAC6B,sBAAxB;AACH;;AACD,WAAO7B,gBAAgB,CAAC8B,uBAAxB;AACH;;AACD,SAAO9B,gBAAgB,CAACiB,UAAxB;AACH;;AACDpB,OAAO,CAACE,eAAR,GAA0BA,eAA1B","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAuctionState = exports.AuctionStateInfo = void 0;\nconst AuctionInfoTypes_1 = require(\"./AuctionInfoTypes\");\nvar AuctionStateInfo;\n(function (AuctionStateInfo) {\n    AuctionStateInfo[\"LOADING\"] = \"LOADING\";\n    AuctionStateInfo[\"NO_PRICING\"] = \"NO_PRICING\";\n    AuctionStateInfo[\"PERPETUAL_BID\"] = \"PERPETUAL_BID\";\n    AuctionStateInfo[\"PERPETUAL_ASK\"] = \"PERPETUAL_ASK\";\n    AuctionStateInfo[\"RESERVE_AUCTION_PENDING\"] = \"RESERVE_AUCTION_PENDING\";\n    AuctionStateInfo[\"RESERVE_AUCTION_ACTIVE\"] = \"RESERVE_AUCTION_ACTIVE\";\n    AuctionStateInfo[\"RESERVE_AUCTION_LAST_15\"] = \"RESERVE_AUCTION_LAST_15\";\n    AuctionStateInfo[\"RESERVE_AUCTION_ENDED\"] = \"RESERVE_AUCTION_ENDED\";\n    AuctionStateInfo[\"RESERVE_AUCTION_FINISHED\"] = \"RESERVE_AUCTION_FINISHED\";\n})(AuctionStateInfo = exports.AuctionStateInfo || (exports.AuctionStateInfo = {}));\nfunction getAuctionState(pricing) {\n    var _a;\n    if (pricing.auctionType === AuctionInfoTypes_1.AuctionType.PERPETUAL) {\n        if (pricing.perpetual.ask) {\n            return AuctionStateInfo.PERPETUAL_ASK;\n        }\n        if (!pricing.perpetual.highestBid && ((_a = pricing.reserve) === null || _a === void 0 ? void 0 : _a.previousBids.length)) {\n            return AuctionStateInfo.RESERVE_AUCTION_FINISHED;\n        }\n        if (pricing.perpetual.highestBid) {\n            return AuctionStateInfo.PERPETUAL_BID;\n        }\n        return AuctionStateInfo.NO_PRICING;\n    }\n    if (pricing.auctionType === AuctionInfoTypes_1.AuctionType.RESERVE && pricing.reserve) {\n        if (pricing.reserve.current.likelyHasEnded) {\n            return AuctionStateInfo.RESERVE_AUCTION_FINISHED;\n        }\n        if (pricing.reserve.current.reserveMet) {\n            if (pricing.reserve.expectedEndTimestamp &&\n                Math.floor(new Date().getTime() / 1000) - 15 * 60 >\n                    parseInt(pricing.reserve.expectedEndTimestamp, 10)) {\n                return AuctionStateInfo.RESERVE_AUCTION_LAST_15;\n            }\n            return AuctionStateInfo.RESERVE_AUCTION_ACTIVE;\n        }\n        return AuctionStateInfo.RESERVE_AUCTION_PENDING;\n    }\n    return AuctionStateInfo.NO_PRICING;\n}\nexports.getAuctionState = getAuctionState;\n"]},"metadata":{},"sourceType":"script"}