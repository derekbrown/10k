{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PricingComponent = void 0;\n\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\n\nconst react_1 = require(\"react\");\n\nconst useMediaContext_1 = require(\"../context/useMediaContext\");\n\nconst NFTDataContext_1 = require(\"../context/NFTDataContext\");\n\nconst CountdownDisplay_1 = require(\"../components/CountdownDisplay\");\n\nconst PricingString_1 = require(\"../utils/PricingString\");\n\nconst nft_hooks_1 = require(\"@zoralabs/nft-hooks\");\n\nfunction isInFuture(timestamp) {\n  const timestampParsed = parseInt(timestamp);\n  return timestampParsed > Math.floor(new Date().getTime() / 1000);\n}\n\nconst PricingComponent = _ref => {\n  let {\n    showPerpetual = true,\n    className\n  } = _ref;\n\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n  const {\n    nft: {\n      data\n    }\n  } = react_1.useContext(NFTDataContext_1.NFTDataContext);\n  const {\n    getStyles,\n    getString\n  } = useMediaContext_1.useMediaContext();\n  const pricing = data === null || data === void 0 ? void 0 : data.pricing;\n\n  if (pricing && !pricing.reserve && pricing.status === nft_hooks_1.AuctionStateInfo.NO_PRICING) {\n    return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n      type: \"unknown\"\n    }), {\n      children: [jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), {\n        children: getString(\"RESERVE_PRICE\")\n      }), void 0), jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), {\n        children: getString(\"NO_PRICING_PLACEHOLDER\")\n      }), void 0), jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), {\n        children: getString(\"HIGHEST_BID\")\n      }), void 0), jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), {\n        children: getString(\"NO_PRICING_PLACEHOLDER\")\n      }), void 0)]\n    }), void 0);\n  }\n\n  if (pricing && showPerpetual && (!pricing.reserve || ((_a = pricing.reserve) === null || _a === void 0 ? void 0 : _a.finalizedAtTimestamp)) && pricing.auctionType === nft_hooks_1.AuctionType.PERPETUAL) {\n    let listPrice = null;\n\n    if ((_b = pricing.perpetual.ask) === null || _b === void 0 ? void 0 : _b.pricing) {\n      const perpetualPricing = (_c = pricing.perpetual.ask) === null || _c === void 0 ? void 0 : _c.pricing;\n      listPrice = jsx_runtime_1.jsxs(react_1.Fragment, {\n        children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n          children: getString(\"LIST_PRICE\")\n        }), void 0), jsx_runtime_1.jsx(PricingString_1.PricingString, {\n          pricing: perpetualPricing,\n          showUSD: false\n        }, void 0)]\n      }, void 0);\n    }\n\n    const highestBid = pricing.perpetual.highestBid;\n\n    if (!highestBid && ((_d = pricing.reserve) === null || _d === void 0 ? void 0 : _d.previousBids.length)) {\n      const highestPreviousBid = pricing.reserve.previousBids[0];\n      return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n        type: \"reserve-pending\"\n      }), {\n        children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n          children: getString(\"SOLD_FOR\")\n        }), void 0), jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), {\n          children: jsx_runtime_1.jsx(PricingString_1.PricingString, {\n            pricing: highestPreviousBid.pricing,\n            showUSD: false\n          }, void 0)\n        }), void 0), listPrice]\n      }), void 0);\n    }\n\n    return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n      type: \"perpetual\"\n    }), {\n      children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n        children: getString(\"HIGHEST_BID\")\n      }), void 0), jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), {\n        children: highestBid ? jsx_runtime_1.jsx(PricingString_1.PricingString, {\n          showUSD: false,\n          pricing: highestBid.pricing\n        }, void 0) : getString(\"NO_PRICING_PLACEHOLDER\")\n      }), void 0), listPrice]\n    }), void 0);\n  }\n\n  if (pricing && pricing.reserve) {\n    if (((_e = pricing.reserve) === null || _e === void 0 ? void 0 : _e.current.reserveMet) && !((_f = pricing.reserve) === null || _f === void 0 ? void 0 : _f.current.likelyHasEnded)) {\n      const highestBid = (_g = pricing.reserve) === null || _g === void 0 ? void 0 : _g.current.highestBid;\n      return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n        type: \"reserve-active\"\n      }), {\n        children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n          children: getString(\"TOP_BID\")\n        }), void 0), jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), {\n          children: highestBid && jsx_runtime_1.jsx(PricingString_1.PricingString, {\n            pricing: highestBid === null || highestBid === void 0 ? void 0 : highestBid.pricing,\n            showUSD: false\n          }, void 0)\n        }), void 0), ((_h = pricing.reserve) === null || _h === void 0 ? void 0 : _h.expectedEndTimestamp) && isInFuture(pricing.reserve.expectedEndTimestamp) && jsx_runtime_1.jsxs(react_1.Fragment, {\n          children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n            children: getString(\"ENDS_IN\")\n          }), void 0), jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), {\n            children: jsx_runtime_1.jsx(CountdownDisplay_1.CountdownDisplay, {\n              to: pricing.reserve.expectedEndTimestamp\n            }, void 0)\n          }), void 0)]\n        }, void 0)]\n      }), void 0);\n    }\n\n    if (pricing.reserve && pricing.reserve.current.likelyHasEnded) {\n      const highestBid = pricing.reserve.currentBid || pricing.reserve.previousBids[0];\n      return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n        type: \"reserve-finished\"\n      }), {\n        children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n          children: getString(\"AUCTION_SOLD_FOR\")\n        }), void 0), jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), {\n          children: jsx_runtime_1.jsx(PricingString_1.PricingString, {\n            showUSD: false,\n            pricing: highestBid.pricing\n          }, void 0)\n        }), void 0)]\n      }), void 0);\n    }\n\n    if ((_j = pricing.reserve) === null || _j === void 0 ? void 0 : _j.reservePrice) {\n      return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n        type: \"reserve-pending\"\n      }), {\n        children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), {\n          children: getString(\"RESERVE_PRICE\")\n        }), void 0), jsx_runtime_1.jsx(\"span\", {\n          children: jsx_runtime_1.jsx(PricingString_1.PricingString, {\n            showUSD: false,\n            pricing: pricing.reserve.reservePrice\n          }, void 0)\n        }, void 0)]\n      }), void 0);\n    }\n  }\n\n  return jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n    type: \"unknown\"\n  }), {\n    children: [jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), {\n      children: getString(\"PRICING_LOADING\")\n    }), void 0), jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), {\n      children: getString(\"PRICING_LOADING\")\n    }), void 0)]\n  }), void 0);\n};\n\nexports.PricingComponent = PricingComponent;","map":{"version":3,"sources":["/Users/derekbrown/workspace/10kdigits/node_modules/@zoralabs/nft-components/dist/nft-preview/PricingComponent.js"],"names":["Object","defineProperty","exports","value","PricingComponent","jsx_runtime_1","require","react_1","useMediaContext_1","NFTDataContext_1","CountdownDisplay_1","PricingString_1","nft_hooks_1","isInFuture","timestamp","timestampParsed","parseInt","Math","floor","Date","getTime","showPerpetual","className","_a","_b","_c","_d","_e","_f","_g","_h","_j","nft","data","useContext","NFTDataContext","getStyles","getString","useMediaContext","pricing","reserve","status","AuctionStateInfo","NO_PRICING","jsxs","assign","type","children","jsx","finalizedAtTimestamp","auctionType","AuctionType","PERPETUAL","listPrice","perpetual","ask","perpetualPricing","Fragment","PricingString","showUSD","highestBid","previousBids","length","highestPreviousBid","current","reserveMet","likelyHasEnded","expectedEndTimestamp","CountdownDisplay","to","currentBid","reservePrice"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PricingComponent = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst useMediaContext_1 = require(\"../context/useMediaContext\");\nconst NFTDataContext_1 = require(\"../context/NFTDataContext\");\nconst CountdownDisplay_1 = require(\"../components/CountdownDisplay\");\nconst PricingString_1 = require(\"../utils/PricingString\");\nconst nft_hooks_1 = require(\"@zoralabs/nft-hooks\");\nfunction isInFuture(timestamp) {\n    const timestampParsed = parseInt(timestamp);\n    return timestampParsed > Math.floor(new Date().getTime() / 1000);\n}\nconst PricingComponent = ({ showPerpetual = true, className, }) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    const { nft: { data }, } = react_1.useContext(NFTDataContext_1.NFTDataContext);\n    const { getStyles, getString } = useMediaContext_1.useMediaContext();\n    const pricing = data === null || data === void 0 ? void 0 : data.pricing;\n    if (pricing &&\n        !pricing.reserve &&\n        pricing.status === nft_hooks_1.AuctionStateInfo.NO_PRICING) {\n        return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, { type: \"unknown\" }), { children: [jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"RESERVE_PRICE\") }), void 0),\n                jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), { children: getString(\"NO_PRICING_PLACEHOLDER\") }), void 0),\n                jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"HIGHEST_BID\") }), void 0),\n                jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), { children: getString(\"NO_PRICING_PLACEHOLDER\") }), void 0)] }), void 0));\n    }\n    if (pricing &&\n        showPerpetual &&\n        (!pricing.reserve || ((_a = pricing.reserve) === null || _a === void 0 ? void 0 : _a.finalizedAtTimestamp)) &&\n        pricing.auctionType === nft_hooks_1.AuctionType.PERPETUAL) {\n        let listPrice = null;\n        if ((_b = pricing.perpetual.ask) === null || _b === void 0 ? void 0 : _b.pricing) {\n            const perpetualPricing = (_c = pricing.perpetual.ask) === null || _c === void 0 ? void 0 : _c.pricing;\n            listPrice = (jsx_runtime_1.jsxs(react_1.Fragment, { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"LIST_PRICE\") }), void 0),\n                    jsx_runtime_1.jsx(PricingString_1.PricingString, { pricing: perpetualPricing, showUSD: false }, void 0)] }, void 0));\n        }\n        const highestBid = pricing.perpetual.highestBid;\n        if (!highestBid && ((_d = pricing.reserve) === null || _d === void 0 ? void 0 : _d.previousBids.length)) {\n            const highestPreviousBid = pricing.reserve.previousBids[0];\n            return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n                type: \"reserve-pending\",\n            }), { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"SOLD_FOR\") }), void 0),\n                    jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), { children: jsx_runtime_1.jsx(PricingString_1.PricingString, { pricing: highestPreviousBid.pricing, showUSD: false }, void 0) }), void 0), listPrice] }), void 0));\n        }\n        return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, { type: \"perpetual\" }), { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"HIGHEST_BID\") }), void 0),\n                jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), { children: highestBid ? (jsx_runtime_1.jsx(PricingString_1.PricingString, { showUSD: false, pricing: highestBid.pricing }, void 0)) : (getString(\"NO_PRICING_PLACEHOLDER\")) }), void 0), listPrice] }), void 0));\n    }\n    if (pricing && pricing.reserve) {\n        if (((_e = pricing.reserve) === null || _e === void 0 ? void 0 : _e.current.reserveMet) &&\n            !((_f = pricing.reserve) === null || _f === void 0 ? void 0 : _f.current.likelyHasEnded)) {\n            const highestBid = (_g = pricing.reserve) === null || _g === void 0 ? void 0 : _g.current.highestBid;\n            return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n                type: \"reserve-active\",\n            }), { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"TOP_BID\") }), void 0),\n                    jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), { children: highestBid && (jsx_runtime_1.jsx(PricingString_1.PricingString, { pricing: highestBid === null || highestBid === void 0 ? void 0 : highestBid.pricing, showUSD: false }, void 0)) }), void 0),\n                    ((_h = pricing.reserve) === null || _h === void 0 ? void 0 : _h.expectedEndTimestamp) &&\n                        isInFuture(pricing.reserve.expectedEndTimestamp) && (jsx_runtime_1.jsxs(react_1.Fragment, { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"ENDS_IN\") }), void 0),\n                            jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), { children: jsx_runtime_1.jsx(CountdownDisplay_1.CountdownDisplay, { to: pricing.reserve.expectedEndTimestamp }, void 0) }), void 0)] }, void 0))] }), void 0));\n        }\n        if (pricing.reserve && pricing.reserve.current.likelyHasEnded) {\n            const highestBid = pricing.reserve.currentBid || pricing.reserve.previousBids[0];\n            return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n                type: \"reserve-finished\",\n            }), { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"AUCTION_SOLD_FOR\") }), void 0),\n                    jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"pricingAmount\"), { children: jsx_runtime_1.jsx(PricingString_1.PricingString, { showUSD: false, pricing: highestBid.pricing }, void 0) }), void 0)] }), void 0));\n        }\n        if ((_j = pricing.reserve) === null || _j === void 0 ? void 0 : _j.reservePrice) {\n            return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, {\n                type: \"reserve-pending\",\n            }), { children: [jsx_runtime_1.jsx(\"span\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"RESERVE_PRICE\") }), void 0),\n                    jsx_runtime_1.jsx(\"span\", { children: jsx_runtime_1.jsx(PricingString_1.PricingString, { showUSD: false, pricing: pricing.reserve.reservePrice }, void 0) }, void 0)] }), void 0));\n        }\n    }\n    return (jsx_runtime_1.jsxs(\"div\", Object.assign({}, getStyles(\"cardAuctionPricing\", className, { type: \"unknown\" }), { children: [jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"textSubdued\"), { children: getString(\"PRICING_LOADING\") }), void 0),\n            jsx_runtime_1.jsx(\"div\", Object.assign({}, getStyles(\"pricingAmount\"), { children: getString(\"PRICING_LOADING\") }), void 0)] }), void 0));\n};\nexports.PricingComponent = PricingComponent;\n"]},"metadata":{},"sourceType":"script"}