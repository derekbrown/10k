{"ast":null,"code":"import \"../../../utilities/globals/index.js\";\nimport { useEffect, useRef } from \"react\";\nexport function useAfterFastRefresh(effectFn) {\n  if (__DEV__) {\n    var didRefresh_1 = useRef(false);\n    useEffect(function () {\n      return function () {\n        didRefresh_1.current = true;\n      };\n    }, []);\n    useEffect(function () {\n      if (didRefresh_1.current === true) {\n        didRefresh_1.current = false;\n        effectFn();\n      }\n    }, []);\n  }\n}","map":{"version":3,"mappings":"AAAA,OAAO,qCAAP;AACA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AAUA,OAAM,SAAUC,mBAAV,CAA8BC,QAA9B,EAAqD;AACzD,MAAIC,OAAJ,EAAa;AACX,QAAMC,YAAU,GAAGJ,MAAM,CAAC,KAAD,CAAzB;AACAD,aAAS,CAAC;AACR,aAAO;AAELK,oBAAU,CAACC,OAAX,GAAqB,IAArB;AACD,OAHD;AAID,KALQ,EAKN,EALM,CAAT;AAOAN,aAAS,CAAC;AACR,UAAIK,YAAU,CAACC,OAAX,KAAuB,IAA3B,EAAiC;AAE/BD,oBAAU,CAACC,OAAX,GAAqB,KAArB;AACAH,gBAAQ;AACT;AACF,KANQ,EAMN,EANM,CAAT;AAOD;AACF","names":["useEffect","useRef","useAfterFastRefresh","effectFn","__DEV__","didRefresh_1","current"],"sourceRoot":"","sources":["../../../../src/react/hooks/utils/useAfterFastRefresh.ts"],"sourcesContent":["import '../../../utilities/globals';\nimport { useEffect, useRef } from \"react\";\n\n/**\n * This hook allows running a function only immediately after a react\n * fast refresh or live reload.\n *\n * Useful in order to ensure that we can reinitialize things that have been\n * disposed by cleanup functions in `useEffect`.\n * @param effectFn a function to run immediately after a fast refresh\n */\nexport function useAfterFastRefresh(effectFn: () => unknown) {\n  if (__DEV__) {\n    const didRefresh = useRef(false);\n    useEffect(() => {\n      return () => {\n        // Detect fast refresh, only runs multiple times in fast refresh\n        didRefresh.current = true;\n      };\n    }, []);\n\n    useEffect(() => {\n      if (didRefresh.current === true) {\n        // This block only runs after a fast refresh\n        didRefresh.current = false;\n        effectFn();\n      }\n    }, [])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}