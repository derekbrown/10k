{"ast":null,"code":"'use strict';\n\nvar defaultIsExtractableFile = require('./isExtractableFile');\n\nmodule.exports = function extractFiles(value, path, isExtractableFile) {\n  if (path === void 0) {\n    path = '';\n  }\n\n  if (isExtractableFile === void 0) {\n    isExtractableFile = defaultIsExtractableFile;\n  }\n\n  var clone;\n  var files = new Map();\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file);\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths);else files.set(file, paths);\n  }\n\n  if (isExtractableFile(value)) {\n    clone = null;\n    addFile([path], value);\n  } else {\n    var prefix = path ? path + '.' : '';\n    if (typeof FileList !== 'undefined' && value instanceof FileList) clone = Array.prototype.map.call(value, function (file, i) {\n      addFile(['' + prefix + i], file);\n      return null;\n    });else if (Array.isArray(value)) clone = value.map(function (child, i) {\n      var result = extractFiles(child, '' + prefix + i, isExtractableFile);\n      result.files.forEach(addFile);\n      return result.clone;\n    });else if (value && value.constructor === Object) {\n      clone = {};\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i, isExtractableFile);\n        result.files.forEach(addFile);\n        clone[i] = result.clone;\n      }\n    } else clone = value;\n  }\n\n  return {\n    clone: clone,\n    files: files\n  };\n};","map":{"version":3,"sources":["/Users/derekbrown/workspace/10kdigits/node_modules/graphql-request/node_modules/extract-files/public/extractFiles.js"],"names":["defaultIsExtractableFile","require","module","exports","extractFiles","value","path","isExtractableFile","clone","files","Map","addFile","paths","file","storedPaths","get","push","apply","set","prefix","FileList","Array","prototype","map","call","i","isArray","child","result","forEach","constructor","Object"],"mappings":"AAAA;;AAEA,IAAIA,wBAAwB,GAAGC,OAAO,CAAC,qBAAD,CAAtC;;AAEAC,MAAM,CAACC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,iBAAnC,EAAsD;AACrE,MAAID,IAAI,KAAK,KAAK,CAAlB,EAAqB;AACnBA,IAAAA,IAAI,GAAG,EAAP;AACD;;AAED,MAAIC,iBAAiB,KAAK,KAAK,CAA/B,EAAkC;AAChCA,IAAAA,iBAAiB,GAAGP,wBAApB;AACD;;AAED,MAAIQ,KAAJ;AACA,MAAIC,KAAK,GAAG,IAAIC,GAAJ,EAAZ;;AAEA,WAASC,OAAT,CAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;AAC5B,QAAIC,WAAW,GAAGL,KAAK,CAACM,GAAN,CAAUF,IAAV,CAAlB;AACA,QAAIC,WAAJ,EAAiBA,WAAW,CAACE,IAAZ,CAAiBC,KAAjB,CAAuBH,WAAvB,EAAoCF,KAApC,EAAjB,KACKH,KAAK,CAACS,GAAN,CAAUL,IAAV,EAAgBD,KAAhB;AACN;;AAED,MAAIL,iBAAiB,CAACF,KAAD,CAArB,EAA8B;AAC5BG,IAAAA,KAAK,GAAG,IAAR;AACAG,IAAAA,OAAO,CAAC,CAACL,IAAD,CAAD,EAASD,KAAT,CAAP;AACD,GAHD,MAGO;AACL,QAAIc,MAAM,GAAGb,IAAI,GAAGA,IAAI,GAAG,GAAV,GAAgB,EAAjC;AACA,QAAI,OAAOc,QAAP,KAAoB,WAApB,IAAmCf,KAAK,YAAYe,QAAxD,EACEZ,KAAK,GAAGa,KAAK,CAACC,SAAN,CAAgBC,GAAhB,CAAoBC,IAApB,CAAyBnB,KAAzB,EAAgC,UAAUQ,IAAV,EAAgBY,CAAhB,EAAmB;AACzDd,MAAAA,OAAO,CAAC,CAAC,KAAKQ,MAAL,GAAcM,CAAf,CAAD,EAAoBZ,IAApB,CAAP;AACA,aAAO,IAAP;AACD,KAHO,CAAR,CADF,KAKK,IAAIQ,KAAK,CAACK,OAAN,CAAcrB,KAAd,CAAJ,EACHG,KAAK,GAAGH,KAAK,CAACkB,GAAN,CAAU,UAAUI,KAAV,EAAiBF,CAAjB,EAAoB;AACpC,UAAIG,MAAM,GAAGxB,YAAY,CAACuB,KAAD,EAAQ,KAAKR,MAAL,GAAcM,CAAtB,EAAyBlB,iBAAzB,CAAzB;AACAqB,MAAAA,MAAM,CAACnB,KAAP,CAAaoB,OAAb,CAAqBlB,OAArB;AACA,aAAOiB,MAAM,CAACpB,KAAd;AACD,KAJO,CAAR,CADG,KAMA,IAAIH,KAAK,IAAIA,KAAK,CAACyB,WAAN,KAAsBC,MAAnC,EAA2C;AAC9CvB,MAAAA,KAAK,GAAG,EAAR;;AAEA,WAAK,IAAIiB,CAAT,IAAcpB,KAAd,EAAqB;AACnB,YAAIuB,MAAM,GAAGxB,YAAY,CAACC,KAAK,CAACoB,CAAD,CAAN,EAAW,KAAKN,MAAL,GAAcM,CAAzB,EAA4BlB,iBAA5B,CAAzB;AACAqB,QAAAA,MAAM,CAACnB,KAAP,CAAaoB,OAAb,CAAqBlB,OAArB;AACAH,QAAAA,KAAK,CAACiB,CAAD,CAAL,GAAWG,MAAM,CAACpB,KAAlB;AACD;AACF,KARI,MAQEA,KAAK,GAAGH,KAAR;AACR;;AAED,SAAO;AACLG,IAAAA,KAAK,EAAEA,KADF;AAELC,IAAAA,KAAK,EAAEA;AAFF,GAAP;AAID,CAjDD","sourcesContent":["'use strict';\n\nvar defaultIsExtractableFile = require('./isExtractableFile');\n\nmodule.exports = function extractFiles(value, path, isExtractableFile) {\n  if (path === void 0) {\n    path = '';\n  }\n\n  if (isExtractableFile === void 0) {\n    isExtractableFile = defaultIsExtractableFile;\n  }\n\n  var clone;\n  var files = new Map();\n\n  function addFile(paths, file) {\n    var storedPaths = files.get(file);\n    if (storedPaths) storedPaths.push.apply(storedPaths, paths);\n    else files.set(file, paths);\n  }\n\n  if (isExtractableFile(value)) {\n    clone = null;\n    addFile([path], value);\n  } else {\n    var prefix = path ? path + '.' : '';\n    if (typeof FileList !== 'undefined' && value instanceof FileList)\n      clone = Array.prototype.map.call(value, function (file, i) {\n        addFile(['' + prefix + i], file);\n        return null;\n      });\n    else if (Array.isArray(value))\n      clone = value.map(function (child, i) {\n        var result = extractFiles(child, '' + prefix + i, isExtractableFile);\n        result.files.forEach(addFile);\n        return result.clone;\n      });\n    else if (value && value.constructor === Object) {\n      clone = {};\n\n      for (var i in value) {\n        var result = extractFiles(value[i], '' + prefix + i, isExtractableFile);\n        result.files.forEach(addFile);\n        clone[i] = result.clone;\n      }\n    } else clone = value;\n  }\n\n  return {\n    clone: clone,\n    files: files,\n  };\n};\n"]},"metadata":{},"sourceType":"script"}