"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AddressView = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const nft_hooks_1 = require("@zoralabs/nft-hooks");
const useMediaContext_1 = require("../context/useMediaContext");
const PREFIX_ADDRESS = "0x";
const AddressView = ({ address, showChars = 6, className, }) => {
    var _a;
    const { getStyles, style } = useMediaContext_1.useMediaContext();
    const { theme } = style;
    // @ts-ignore (address can be undefined but not typed correctly for now)
    const ens = nft_hooks_1.useENSAddress(theme.useEnsResolution ? address : undefined);
    const username = nft_hooks_1.useZoraUsername(theme.useZoraUsernameResolution || ens.error ? address : undefined);
    const addressFirst = address.slice(0, showChars + PREFIX_ADDRESS.length);
    const addressLast = address.slice(address.length - showChars);
    if (ens.data) {
        const zoraLink = ens.data;
        return (jsx_runtime_1.jsx("a", Object.assign({}, getStyles("addressLink", className), { href: `https://zora.co/${zoraLink}`, target: "_blank", rel: "noreferrer" }, { children: jsx_runtime_1.jsx("span", { children: ens.data }, void 0) }), void 0));
    }
    if ((_a = username.username) === null || _a === void 0 ? void 0 : _a.username) {
        return (jsx_runtime_1.jsx("a", Object.assign({}, getStyles("addressLink", className), { href: `https://zora.co/${username.username.username}`, target: "_blank", rel: "noreferrer" }, { children: jsx_runtime_1.jsx("span", { children: `@${username.username.username}` }, void 0) }), void 0));
    }
    // Username loading
    if (theme.useZoraUsernameResolution &&
        !username.error &&
        !username.username) {
        return jsx_runtime_1.jsx("span", { children: "..." }, void 0);
    }
    // Ens loading
    if (theme.useEnsResolution && !ens.error && !ens.data) {
        return jsx_runtime_1.jsx("span", { children: "..." }, void 0);
    }
    return (jsx_runtime_1.jsx("a", Object.assign({}, getStyles("addressLink", className), { href: `https://etherscan.io/address/${address}`, target: "_blank", rel: "noreferrer" }, { children: jsx_runtime_1.jsxs("span", { children: [addressFirst, "...", addressLast] }, void 0) }), void 0));
};
exports.AddressView = AddressView;
