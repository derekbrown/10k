"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Text = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const nft_hooks_1 = require("@zoralabs/nft-hooks");
const MediaLoader_1 = require("./MediaLoader");
const RendererConfig_1 = require("./RendererConfig");
exports.Text = {
    getRenderingPreference: (request) => {
        var _a, _b, _c, _d, _e;
        if (((_a = request.media.content) === null || _a === void 0 ? void 0 : _a.type) === 'text/html') {
            return RendererConfig_1.RenderingPreference.INVALID;
        }
        if ((_c = (_b = request.media.content) === null || _b === void 0 ? void 0 : _b.type) === null || _c === void 0 ? void 0 : _c.startsWith("text/plain")) {
            return RendererConfig_1.RenderingPreference.PRIORITY;
        }
        if ((_e = (_d = request.media.content) === null || _d === void 0 ? void 0 : _d.type) === null || _e === void 0 ? void 0 : _e.startsWith("text/")) {
            return RendererConfig_1.RenderingPreference.LOW;
        }
        return RendererConfig_1.RenderingPreference.INVALID;
    },
    render: ({ request, getStyles }) => {
        var _a;
        const media = nft_hooks_1.useNFTContent((_a = request.media.content) === null || _a === void 0 ? void 0 : _a.uri);
        return (jsx_runtime_1.jsx(MediaLoader_1.MediaLoader, Object.assign({ getStyles: getStyles, loading: media.content ? false : true, error: media.error }, { children: jsx_runtime_1.jsx("div", Object.assign({}, getStyles("mediaContentText"), { children: media.content && "text" in media.content ? media.content.text : "" }), void 0) }), void 0));
    },
};
